# ğŸ¢ Application MVC - Gestion RH

Une application web moderne de gestion des ressources humaines dÃ©veloppÃ©e avec une architecture MVC personnalisÃ©e en PHP.

## ğŸ“‹ Table des matiÃ¨res

- [FonctionnalitÃ©s](#-fonctionnalitÃ©s)
- [PrÃ©requis](#-prÃ©requis)
- [Installation](#-installation)
- [Configuration](#-configuration)
- [Utilisation](#-utilisation)
- [Architecture](#-architecture)
- [API](#-api)
- [Tests](#-tests)
- [DÃ©ploiement](#-dÃ©ploiement)
- [Contribution](#-contribution)
- [Support](#-support)

## âœ¨ FonctionnalitÃ©s

### ğŸ‘¥ Gestion des EmployÃ©s
- âœ… CRUD complet (CrÃ©er, Lire, Modifier, Supprimer)
- âœ… Import/Export (Excel, PDF)
- âœ… Recherche avancÃ©e et filtres
- âœ… Gestion des photos de profil
- âœ… Historique des modifications

### â° SystÃ¨me de Pointage
- âœ… Pointage d'entrÃ©e/sortie
- âœ… Gestion des pauses
- âœ… Justification des retards
- âœ… Calcul automatique des heures
- âœ… Rapports de prÃ©sence

### ğŸ‘¨â€ğŸ’¼ Gestion des Administrateurs
- âœ… RÃ´les et permissions
- âœ… HiÃ©rarchie managÃ©riale
- âœ… Audit des actions

### ğŸ”” SystÃ¨me de Notifications
- âœ… Notifications temps rÃ©el
- âœ… Notifications par email
- âœ… Historique des notifications
- âœ… ParamÃ©trage personnalisÃ©

### ğŸ’¬ Messagerie Interne
- âœ… Messages privÃ©s
- âœ… PiÃ¨ces jointes
- âœ… Conversations groupÃ©es
- âœ… Statuts de lecture

### ğŸ“… Calendrier Interactif
- âœ… Ã‰vÃ©nements d'entreprise
- âœ… CongÃ©s et absences
- âœ… RÃ©unions et formations
- âœ… Vue mensuelle/hebdomadaire

### ğŸ“Š Rapports et Statistiques
- âœ… Tableaux de bord
- âœ… Graphiques interactifs
- âœ… Export des donnÃ©es
- âœ… Analyses personnalisÃ©es

## ğŸ”§ PrÃ©requis

### Serveur Web
- **PHP** >= 8.0
- **MySQL** >= 5.7 ou **MariaDB** >= 10.3
- **Apache** ou **Nginx**
- **Composer** (optionnel)

### Extensions PHP Requises
```bash
php-mysql
php-pdo
php-json
php-mbstring
php-curl
php-gd
php-zip
php-xml
```

### Outils de DÃ©veloppement (Optionnels)
- **Node.js** >= 14.0 (pour les assets)
- **Git** pour le versioning
- **PHPUnit** pour les tests

## ğŸš€ Installation

### 1. Cloner le Projet
```bash
git clone https://github.com/votre-repo/gestion-rh-mvc.git
cd gestion-rh-mvc
```

### 2. Configuration du Serveur Web

#### Apache (.htaccess)
```apache
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ public/index.php [QSA,L]
```

#### Nginx
```nginx
server {
    listen 80;
    server_name votre-domaine.com;
    root /path/to/gestion-rh-mvc/public;
    index index.php;

    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }

    location ~ \.php$ {
        fastcgi_pass unix:/var/run/php/php8.0-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
        include fastcgi_params;
    }
}
```

### 3. Configuration de la Base de DonnÃ©es

#### CrÃ©er la Base de DonnÃ©es
```sql
CREATE DATABASE gestion_rh CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'rh_user'@'localhost' IDENTIFIED BY 'mot_de_passe_securise';
GRANT ALL PRIVILEGES ON gestion_rh.* TO 'rh_user'@'localhost';
FLUSH PRIVILEGES;
```

#### ExÃ©cuter les Migrations
```bash
cd migrations
php 001_create_tables.php up
```

### 4. Configuration des Permissions
```bash
# Dossiers d'Ã©criture
chmod 755 logs/
chmod 755 uploads/
chmod 755 exports/

# Fichiers de configuration
chmod 644 config/config.php
```

## âš™ï¸ Configuration

### 1. Configuration Principale
Ã‰ditez le fichier `config/config.php` :

```php
<?php
// Base de donnÃ©es
define('DB_HOST', 'localhost');
define('DB_NAME', 'gestion_rh');
define('DB_USER', 'rh_user');
define('DB_PASS', 'mot_de_passe_securise');

// Application
define('APP_NAME', 'Gestion RH - Votre Entreprise');
define('BASE_URL', 'https://votre-domaine.com/');
define('APP_ENV', 'production'); // development ou production

// SÃ©curitÃ©
define('SECRET_KEY', 'votre_cle_secrete_unique_et_complexe');

// Email
define('MAIL_HOST', 'smtp.votre-serveur.com');
define('MAIL_USERNAME', 'noreply@votre-domaine.com');
define('MAIL_PASSWORD', 'mot_de_passe_email');
?>
```

### 2. Configuration des RÃ´les et Permissions

Les rÃ´les par dÃ©faut sont :
- **Super Admin** : AccÃ¨s complet
- **Admin** : Gestion des employÃ©s et rapports
- **Manager** : Gestion de son Ã©quipe
- **EmployÃ©** : AccÃ¨s limitÃ© Ã  son profil

### 3. ParamÃ¨tres SystÃ¨me

AccÃ©dez Ã  `/parametres` pour configurer :
- Horaires de travail
- Notifications
- Formats de date/heure
- Politiques de mot de passe

## ğŸ“– Utilisation

### 1. PremiÃ¨re Connexion

**Compte Administrateur par DÃ©faut :**
- Email : `admin@gestion-rh.com`
- Mot de passe : `admin123456`

âš ï¸ **Important** : Changez ce mot de passe immÃ©diatement !

### 2. Gestion des EmployÃ©s

#### Ajouter un EmployÃ©
1. Aller dans **EmployÃ©s** > **Ajouter**
2. Remplir le formulaire
3. Uploader une photo (optionnel)
4. Assigner un manager
5. DÃ©finir les permissions

#### Import en Masse
1. PrÃ©parer un fichier Excel/CSV
2. Aller dans **EmployÃ©s** > **Importer**
3. SÃ©lectionner le fichier
4. Mapper les colonnes
5. Valider l'import

### 3. SystÃ¨me de Pointage

#### Configuration
```php
// Dans config/config.php
define('WORKING_HOURS_START', '08:00');
define('WORKING_HOURS_END', '17:00');
define('LUNCH_BREAK_DURATION', 60); // minutes
define('TOLERANCE_MINUTES', 15);
```

#### Utilisation
- Les employÃ©s pointent via l'interface web
- GÃ©olocalisation optionnelle
- Justification automatique des retards
- Calcul des heures supplÃ©mentaires

### 4. Notifications

#### Types de Notifications
- **Info** : Informations gÃ©nÃ©rales
- **Success** : Actions rÃ©ussies
- **Warning** : Avertissements
- **Error** : Erreurs systÃ¨me

#### Configuration Email
```php
// Utilisation de PHPMailer (recommandÃ©)
require_once 'vendor/phpmailer/phpmailer/src/PHPMailer.php';
require_once 'vendor/phpmailer/phpmailer/src/SMTP.php';
```

### 5. Messagerie

#### FonctionnalitÃ©s
- Messages privÃ©s entre utilisateurs
- PiÃ¨ces jointes (PDF, images, documents)
- Conversations groupÃ©es
- Notifications de nouveaux messages

### 6. Calendrier

#### Types d'Ã‰vÃ©nements
- **RÃ©unions** : Meetings d'Ã©quipe
- **Formations** : Sessions de formation
- **CongÃ©s** : Vacances et absences
- **FÃ©riÃ©s** : Jours fÃ©riÃ©s
- **Maintenance** : ArrÃªts systÃ¨me

## ğŸ—ï¸ Architecture

### Structure MVC

```
gestion-rh-mvc/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Controllers/          # ContrÃ´leurs
â”‚   â”‚   â”œâ”€â”€ AuthController.php
â”‚   â”‚   â”œâ”€â”€ EmployeController.php
â”‚   â”‚   â”œâ”€â”€ PointageController.php
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ Models/              # ModÃ¨les
â”‚   â”‚   â”œâ”€â”€ User.php
â”‚   â”‚   â”œâ”€â”€ Employe.php
â”‚   â”‚   â”œâ”€â”€ Pointage.php
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ Views/               # Vues
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ employes/
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ Core/                # Classes de base
â”‚       â”œâ”€â”€ BaseController.php
â”‚       â”œâ”€â”€ BaseModel.php
â”‚       â””â”€â”€ Router.php
â”œâ”€â”€ config/                  # Configuration
â”‚   â””â”€â”€ config.php
â”œâ”€â”€ public/                  # Point d'entrÃ©e web
â”‚   â”œâ”€â”€ index.php
â”‚   â””â”€â”€ .htaccess
â”œâ”€â”€ assets/                  # Ressources statiques
â”‚   â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ js/
â”‚   â””â”€â”€ images/
â”œâ”€â”€ routes/                  # DÃ©finition des routes
â”‚   â””â”€â”€ web.php
â”œâ”€â”€ migrations/              # Scripts de migration
â”‚   â””â”€â”€ 001_create_tables.php
â”œâ”€â”€ tests/                   # Tests unitaires
â”œâ”€â”€ logs/                    # Fichiers de log
â”œâ”€â”€ uploads/                 # Fichiers uploadÃ©s
â””â”€â”€ exports/                 # Exports gÃ©nÃ©rÃ©s
```

### Flux de RequÃªte

1. **Point d'entrÃ©e** : `public/index.php`
2. **Routage** : `routes/web.php`
3. **ContrÃ´leur** : Traitement de la logique
4. **ModÃ¨le** : AccÃ¨s aux donnÃ©es
5. **Vue** : Rendu HTML
6. **RÃ©ponse** : Envoi au client

### SÃ©curitÃ©

#### Protection CSRF
```php
// GÃ©nÃ©ration du token
$token = generateCsrfToken();

// VÃ©rification
if (!verifyCsrfToken($_POST['_token'])) {
    throw new Exception('Token CSRF invalide');
}
```

#### Validation des DonnÃ©es
```php
$errors = $this->validate($data, [
    'email' => 'required|email',
    'password' => 'required|min:8',
    'nom' => 'required|min:2|max:50'
]);
```

#### Permissions
```php
// VÃ©rification des permissions
if (!$this->hasPermission('edit_employe')) {
    $this->handleUnauthorized();
}
```

## ğŸ”Œ API

### Endpoints Principaux

#### Authentification
```http
POST /api/auth/login
POST /api/auth/logout
POST /api/auth/refresh
```

#### EmployÃ©s
```http
GET    /api/employes           # Liste des employÃ©s
GET    /api/employes/{id}      # DÃ©tails d'un employÃ©
POST   /api/employes           # CrÃ©er un employÃ©
PUT    /api/employes/{id}      # Modifier un employÃ©
DELETE /api/employes/{id}      # Supprimer un employÃ©
```

#### Pointages
```http
GET  /api/pointages            # Liste des pointages
POST /api/pointages/pointer    # Effectuer un pointage
GET  /api/pointages/stats      # Statistiques
```

#### Notifications
```http
GET    /api/notifications      # Liste des notifications
POST   /api/notifications/{id}/read  # Marquer comme lue
DELETE /api/notifications/{id} # Supprimer
```

### Format des RÃ©ponses

#### SuccÃ¨s
```json
{
    "success": true,
    "data": {
        "id": 1,
        "nom": "Dupont",
        "prenom": "Jean"
    },
    "message": "OpÃ©ration rÃ©ussie"
}
```

#### Erreur
```json
{
    "success": false,
    "error": {
        "code": 400,
        "message": "DonnÃ©es invalides",
        "details": {
            "email": ["Format d'email invalide"],
            "password": ["Minimum 8 caractÃ¨res"]
        }
    }
}
```

## ğŸ§ª Tests

### Tests Unitaires

```bash
# Installation de PHPUnit
composer require --dev phpunit/phpunit

# ExÃ©cution des tests
./vendor/bin/phpunit tests/
```

### Structure des Tests
```
tests/
â”œâ”€â”€ Unit/
â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â”œâ”€â”€ UserTest.php
â”‚   â”‚   â””â”€â”€ EmployeTest.php
â”‚   â””â”€â”€ Controllers/
â”‚       â”œâ”€â”€ AuthControllerTest.php
â”‚       â””â”€â”€ EmployeControllerTest.php
â”œâ”€â”€ Feature/
â”‚   â”œâ”€â”€ AuthenticationTest.php
â”‚   â””â”€â”€ EmployeManagementTest.php
â””â”€â”€ TestCase.php
```

### Exemple de Test
```php
<?php
class UserTest extends TestCase {
    public function testUserCreation() {
        $user = new User();
        $userData = [
            'nom' => 'Test',
            'prenom' => 'User',
            'email' => 'test@example.com',
            'password' => 'password123'
        ];

        $result = $user->createUser($userData);
        $this->assertNotNull($result);
        $this->assertEquals('test@example.com', $result['email']);
    }
}
```

## ğŸš€ DÃ©ploiement

### DÃ©ploiement en Production

#### 1. PrÃ©paration
```bash
# Optimisation des assets
npm run build

# Nettoyage des fichiers de dÃ©veloppement
rm -rf tests/
rm -rf node_modules/
```

#### 2. Configuration Production
```php
// config/config.php
define('APP_ENV', 'production');
define('APP_DEBUG', false);

// DÃ©sactiver l'affichage des erreurs
error_reporting(0);
ini_set('display_errors', 0);
```

#### 3. SÃ©curisation
```bash
# Permissions restrictives
find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;
chmod 600 config/config.php

# Protection des dossiers sensibles
echo "Deny from all" > logs/.htaccess
echo "Deny from all" > config/.htaccess
```

#### 4. Optimisations
- Mise en cache des vues
- Compression GZIP
- CDN pour les assets
- Cache Redis/Memcached

### Docker (Optionnel)

```dockerfile
FROM php:8.0-apache

# Installation des extensions
RUN docker-php-ext-install pdo pdo_mysql mysqli

# Configuration Apache
COPY apache-config.conf /etc/apache2/sites-available/000-default.conf
RUN a2enmod rewrite

# Copie du code
COPY . /var/www/html/

# Permissions
RUN chown -R www-data:www-data /var/www/html/
```

## ğŸ¤ Contribution

### Guide de Contribution

1. **Fork** le projet
2. CrÃ©er une **branche** pour votre fonctionnalitÃ©
3. **Commiter** vos changements
4. **Pousser** vers la branche
5. Ouvrir une **Pull Request**

### Standards de Code

#### PHP
- PSR-4 pour l'autoloading
- PSR-12 pour le style de code
- Documentation PHPDoc
- Tests unitaires obligatoires

#### JavaScript
- ES6+ moderne
- Documentation JSDoc
- Linting avec ESLint

#### CSS
- MÃ©thodologie BEM
- Variables CSS personnalisÃ©es
- Responsive design

### Commit Messages
```
feat: ajouter systÃ¨me de notifications
fix: corriger bug de pointage
docs: mettre Ã  jour README
style: amÃ©liorer CSS du dashboard
refactor: optimiser requÃªtes base de donnÃ©es
test: ajouter tests pour AuthController
```

## ğŸ“ Support

### Documentation
- **Wiki** : [Lien vers le wiki]
- **API Docs** : [Lien vers la documentation API]
- **Tutoriels** : [Lien vers les tutoriels]

### CommunautÃ©
- **Issues GitHub** : Pour les bugs et demandes de fonctionnalitÃ©s
- **Discussions** : Pour les questions gÃ©nÃ©rales
- **Discord** : Chat en temps rÃ©el

### Support Commercial
- **Email** : support@gestion-rh.com
- **TÃ©lÃ©phone** : +33 1 23 45 67 89
- **Horaires** : Lundi-Vendredi 9h-18h

## ğŸ“„ Licence

Ce projet est sous licence MIT. Voir le fichier [LICENSE](LICENSE) pour plus de dÃ©tails.

## ğŸ™ Remerciements

- **Ã‰quipe de dÃ©veloppement**
- **Contributeurs open source**
- **CommunautÃ© PHP**
- **Testeurs et utilisateurs**

---

## ğŸ“Š Statistiques du Projet

- **Lignes de code** : ~15,000
- **Fichiers** : ~80
- **Tests** : ~150
- **Couverture** : 85%

## ğŸ”„ Changelog

### Version 1.0.0 (2024-01-15)
- âœ¨ Version initiale
- âœ… Gestion complÃ¨te des employÃ©s
- âœ… SystÃ¨me de pointage
- âœ… Notifications temps rÃ©el
- âœ… Messagerie interne
- âœ… Calendrier interactif

### Version 1.1.0 (PrÃ©vue)
- ğŸ”„ API REST complÃ¨te
- ğŸ“± Application mobile
- ğŸ” Authentification SSO
- ğŸ“Š Rapports avancÃ©s
- ğŸŒ Multi-langues

---

**DÃ©veloppÃ© avec â¤ï¸ par l'Ã©quipe Gestion RH**

Pour toute question ou suggestion, n'hÃ©sitez pas Ã  nous contacter !
